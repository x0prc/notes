# WinDbg Commands and Exploration
## Hardware Break On Execute

- A simplified form of the **b**reak on **a**ccess command is for breaking on execute is:
	`ba <access type> <data size> <address>`

- Where:
	`<access type>` == `e` (for **e**xecute).
	`<data size>` == `1` (WinDbg mandates that the size must be 1 if the type is “e").
	`<address>` == an absolute address, symbol name, or calculation of an address like `rsp+0x24`.

- So for instance to break when address 0000000140001050 is executed, you would enter:
	- `ba e 1 0000000140001050`
## Modifying Registers
- Use the same `r` command register syntax as viewing registers, but use an equal sign at the end to assign a value to the register. E.g.
```
0:000> r ax = 0xf00d, rbx = 0xdeadfacebeefd00d, bl = 0x0f
0:000> r ax, rbx, bl
ax=f00d rbx=deadfacebeefd00f bl=f
```
## Viewing Memory
Utilize the `d*` set of commands, which **d**isplay varying amounts of memory at a given address, with varying sizes.

`db <address> L<number>` == displays `<number>` bytes starting at `<address>`.

`dd <address> L<number>` == displays `<number>` doublewords (4 bytes) starting at `<address>`.

`dq <address> L<number>` == displays `<number>` quadwords (8 bytes) starting at `<address>`.

`da <address>` == displays as **A**SCII string at that address until first null terminator.

e.g.

```
0:000> db rsp L6
00000000`0014fe08  ef be ad de 01 00                                ......
0:000> dd rsp L6
00000000`0014fe08  deadbeef 11100001 00000001 0000693d
00000000`0014fe18  4b054299 00007fff
0:000> dq rsp L6
00000000`0014fe08  11100001`deadbeef 0000693d`00000001
00000000`0014fe18  00007fff`4b054299 00000000`00000000
00000000`0014fe28  00000001`40001a4d 00000000`00000001
0:000> da 00000001`40002220
00000001`40002220  "First %d elements of the Fibbona"
00000001`40002240  "cci sequence: "
```
## Call Stack
### From Command Window

Use `k` from the command window to get a stac**k** backtrace.

e.g. when breaking at the entrypoint of `fibbonacci()` in the debug build of `Fibber.exe`, `k` yields the following output.

```
0:000> k
 # Child-SP          RetAddr           Call Site
00 00000000`0014fdc8 00000001`40001093 Fibber!fibbonacci [C:\Users\user\source\repos\Fibber\Fibber.c @ 3] 
01 00000000`0014fdd0 00000001`40001489 Fibber!main+0x43 [C:\Users\user\source\repos\Fibber\Fibber.c @ 18] 
02 00000000`0014fe10 00000001`400013ae Fibber!invoke_main+0x39 [d:\A01\_work\12\s\src\vctools\crt\vcstartup\src\startup\exe_common.inl @ 79] 
03 00000000`0014fe60 00000001`4000126e Fibber!__scrt_common_main_seh+0x12e [d:\A01\_work\12\s\src\vctools\crt\vcstartup\src\startup\exe_common.inl @ 288] 
04 00000000`0014fed0 00000001`400014fe Fibber!__scrt_common_main+0xe [d:\A01\_work\12\s\src\vctools\crt\vcstartup\src\startup\exe_common.inl @ 331] 
05 00000000`0014ff00 00007fff`5eea7034 Fibber!mainCRTStartup+0xe [d:\A01\_work\12\s\src\vctools\crt\vcstartup\src\startup\exe_main.cpp @ 17] 
06 00000000`0014ff30 00007fff`5efe2651 KERNEL32!BaseThreadInitThunk+0x14
07 00000000`0014ff60 00000000`00000000 ntdll!RtlUserThreadStart+0x21
```
## Step Over vs. Step Into vs. Step Out
- The `p` command in the command window by itself will single ste**p** over a single instruction.
- The `t` command in the command window by itself will **t**race into, or single step into, a single instruction.
- The **g**o **u**p (`gu`) command in the Command window by itself will continue execution until it steps out of the current function context (i.e. by executing a return instruction).
## Step To Address:
- `pa <address or symbol name>` in the Command window (for ste**p** to **a**ddress).
## Trace To Address:
- `ta <address or symbol name>` in the Command window (for **t**race to **a**ddress).
## The /1 Argument to Breakpoint Commands
- If you pass a `/1` argument to `bp` or `ba`, it “Creates a “one-shot” breakpoint. After this breakpoint is triggered, it is deleted from the breakpoint list.”